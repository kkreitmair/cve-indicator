import pkg_resources

from setuptools import setup

def readme():
    with open('README.rst') as f:
        return f.read()

var_file = pkg_resources.resource_filename('cve_indicator', '__init__.py')

with open(var_file, 'r') as file_buf:
    data = {}
    for line in file_buf:
        if line.startswith('__title__'):
            data['__title__'] = line.split('=')[-1].strip("\'\n ")
        if line.startswith('__version__'):
            data['__version__'] = line.split('=')[-1].strip("\'\n ")

print(data)

setup(
        name=data.get('__title__'),
        version=data.get('__version__'),
        description='Tool to find CVEs for openwrt packages through Makefiles',
        long_description=readme(),
        long_description_content_type='text/markdown',
        classifiers=[
            'Programming Language :: Python :: 3',
            'License :: OSI Approved :: GNU General Public License v2 (GPLv2)',
            'Developement Status :: 1-Planning',
            'Topic :: Security',
            'Topic :: Software Developement :: Quality Assurance',
            ],
        scripts=['bin/cve-indicator'],
        author='Kreitmair Konrad',
        author_email='kreitmair.konrad@web.de',
        license='GPLv2',
        install_requieres=[],
        include_package_data=True,
        zip_safe=False
        )
